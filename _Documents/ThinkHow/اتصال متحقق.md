# توصيف المشكلة
* إذا لم يصل للمتصل رد الخادم لأي سبب فأنه يعتبر الرسالة لم تصل ويحفظها في طابور الرسائل الفاشلة.
* إذا أعاد المتصل ارسال الرسالة فمن المحتمل أن تكون هذه المرة الثانية لارسال الرسالة، وهذا بفرض أن الخادم استقبل الرسالة ولكن لم يستقبل المستقبل الرد.
*  في هذه الحالة يرد الخادم بأنه تم استلام الرسالة من قبل.
* لكي يرد الخادم بأنه استلم الرسالة من قبل لابد أن يحفظ أرقام الرسائل التي تم استقبالها أو بطريقة ما يعرف أن هذه الرسالة تعالج للمرة الأولى وليس الثانية، المشكلة أن عدد الرسائل مع الوقت يرتفع جداً والبحث كل مرة قبل معالجة الرسالة يأخذ وقت.
* لحل تلك المشكلة تأخذ الرسائل أرقام تسلسلية بالترتيب 1،2،3...
* يحتفظ الخادم برقم التوقع للتسلسل القادم ويكون 1 في بداية الاتصال.
* عند استقبال رسالة يقارن الخادم رقم الرسالة برقم التوقع.
* اذا كان رقم التوقع هو نفس رقم الرسالة، يزيد الخادم رقم التوقع بمقدار واحد.
* لو رقم الرسالة أكبر من رقم التوقع تكون الأرقام بين الرقمين هي رسائل لم تصل للخادم ويحفظ أرقامها في قائمة الرسائل التي لم تصل.
* لو رقم الرسالة أقل من رقم التوقع فإما أن تكون تمت معالجتها من قبل ولم يصل الرد للمرسل أو أنها لم تصل من قبل وللتحقق من ذلك يتم البحث برقمها في قائمة الرسائل التي لم تصل فإن كانت موجودة يتم معالجتها وحذف رقمها من القائمة وإن كانت غير موجودة يتم الرد بأنه تم معالجتها من قبل.
