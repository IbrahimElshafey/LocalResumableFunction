@using MessagePack;
@using ResumableFunctions.Handler.UiService.InOuts;
@model List<PushedCallInfo>
<div class="w3-margin">


    @if (Model.Any())
    {
        <header class="w3-text-indigo">
            <h2 class="w3-margin-top"><b>Pushed Calls</b></h2>
        </header>
        <div class="w3-container">
            <p>
                <label>Search</label>
                <input class="w3-input w3-border" type="text" required="" placeholder="Search by Method Name">
            </p>
            <table class="w3-table-all">
                <thead>
                    <tr class="w3-indigo">
                        <th>Method</th>
                        <th>Input & Output</th>
                        <th>Processing</th>
                        <th>Expected</th>
                        <th>Matched</th>
                        <th>Not Matched</th>
                        <th>Pushed</th>
                    </tr>
                </thead>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            <ul>
                                <li>
                                    <a href="./RF/PushedCall/Details?pushedCallId=@item.PushedCall.Id" class="w3-text-blue">@item.PushedCall.MethodData.MethodUrn</a>
                                </li>
                                <li><b>Method: </b>@item.PushedCall.MethodData.MethodName</li>
                                <li><b>Class: </b>@item.PushedCall.MethodData.ClassName</li>
                                <li><b>Assembly: </b>@item.PushedCall.MethodData.AssemblyName</li>
                            </ul>
                        </td>
                        <td class="JsonObject">@MessagePackSerializer.ConvertToJson(item.PushedCall.DataValue)</td>
                        <td>
                            @((item.MatchedCount + item.NotMatchedCount) == item.ExpectedMatchCount ?
                                "Finished" :
                                "In Progress")
                        </td>
                        <td>@item.ExpectedMatchCount</td>
                        <td>@item.MatchedCount</td>
                        <td>@item.NotMatchedCount</td>
                        <td>@item.PushedCall.Created</td>
                    </tr>
                }
            </table>
            <button class="w3-button w3-indigo w3-margin-top">Show More...</button>
        </div>
    }
    else
    {
        <div class="w3-display-middle w3-padding-64">
            <h1 class="w3-text-red">No pushed calls yet.</h1>
        </div>
    }

</div>